
![](https://web-api.textin.com/ocr_image/external/fb340facd41b4148.jpg)

# 【广发金工】基于AGRU因子聚合的ETF轮动策略

原创安宁宁广发金融工程研究

2025年6月19日13:04 北京

广发证券首席金工分析师 安宁宁

**SAC:S0260512020003**

anningning@gf.com.cn

广发证券资深金工分析师 陈原文

**SAC: S0260517080003**

chenyuanwen@gf.com.cn

**广发证券资深金工分析师 王小康**

**SAC: S0260525020002**

wangxiaokang@gf.com.cn

**广发金工安宁宁陈原文团队**

**摘要**

**ETF发展迅速，轮动需求旺盛：**截止2025年6月15日，股票型ETF（包含场外联接基金）规模总计达到3.81万亿元，ETF数量达到2031只，已经超过主动管理类基金（包括普通股票型、偏股混和指数增强型）的2.84万亿元规模。由于A股市场存在明显的行业和风格分化，仅买入单一ETF并长期持有未必能取得较好的投资体验。由于ETF投资目标在于紧密跟踪某个指数的净值表现，ETF基金所跟踪的指数至关重要，一个好的Beta能为投资者带来丰厚的收益回报。不同指数间的截面收益率差异较大，通过轮动方式定期调仓能获取相对更优的策略表现。

**深度学习因子构建与测试：**构建ETF轮动策略的一种常见方式是将有效的个股因子聚合到指数层面，从而可以实现指数轮动的效果。我们使用AGRU模型基于日频K线量价数据训练得到了A股上表现优异的选股因子。模型训练时使用损失函数调整的方式，改进因子多空收益表现，最终因子在各股票池中均有不错的选股效果。

**ETF轮动策略构建：**接下来我们使用个股因子通过指数成分股权重映射的方式得到指数层面的因子值。月度调仓情况下，因子的IC均值为7.80%，多头年化超额收益率为4.92％，多头超额回撤-14.02％。但若将调仓频率提升至周频，因子的IC均值为4.84%，多头年化超额收益率为8.59%，多头超额回撤-13.23％。收益水平有一定提升，这也与A股较快的行业轮动速度相匹配。此外考虑到众多指数之间相关性过高，不利于起到分散投资风险的作用，我们使用MMR算法对投资标的重新调整，避免组合集中暴露在某些特定行业或风格上。策略的相对于沪深300全收益指数的年化超额收益率为8.43%，信息比率为0.99，超额最大回撤为-9.87％。

**限定特定数量的ETF轮动策略：**我们考虑到近期实际可投资的标的数量已超过300，我们将每期持仓ETF数量限定至5、10或15只。在持仓5只ETF的情况下，年化超额收益率为12.34%，超额最大回撤为-12.17％。持仓10只ETF时，年化超额收益率为8.75%，超额最大回撤为-8.83％。持仓15只ETF时，年化超额收益率为8.13%，超额最大回撤为-8.66％。策略表现整体稳健，与市场优势风格高度一致。

**风险提示：**(1）本文所述算法与模型用量化方法通过历史数据统计、建模和测算完成，所得结论与规律在市场政策、环境变化时存在失效风险。（2）基于模型得到的相关结论并不能完全准确地刻画现实环境以及预测未来。（3）本文策略通过一定的假设与历史数据回测得到，当交易成本提高、市场结构及交易行为改变时有可能存在失效风险，可能导致策略收益下降或出现亏损。

# 一、研究背景

## （一）ETF基金份额增长迅速

随着A股市场的日渐成熟，获取超额收益的难度也在逐渐提高，而ETF作为一种被动投资指数的基金产品，受到越来越多投资者的青睐和认可。截止2025年6月15日，根据Wind统计显示，股票型ETF（包含场外联接基金）规模总计达到3.81万亿元，ETF数量达到2031只，已经超过主动管理类基金（包括普通股票型、偏股混和指数增强型）的2.84万亿元规模。


![](https://web-api.textin.com/ocr_image/external/80d1879196da9873.jpg)

从基金份额变化情况来看，近一年主动管理权益基金和ETF基金发生了较大变化。2025年5月底，主动管理权益基金的总份额为2.84万亿份，而ETF基金的总份额为2.18万亿份。到今年5月底，主动管理权益基金的总份额为2.55万亿份，ETF基金总份额为2.94万亿份。

## （二）ETF基金跟踪指数覆盖面广，差异较大

然而，由于A股市场存在明显的行业和风格分化，仅买入单一ETF并长期持有未必能取得较好的投资体验。由于ETF投资目标在于紧密跟踪某个指数的净值表现，ETF基金所跟踪的指数至关重要，一个好的Beta能为投资者带来丰厚的收益回报。通过定期调仓、不断更换合适的ETF基金有助于及时捕捉行情，获取更加稳健的超额收益。

截止2025年6月份，场内ETF共有969只，跟踪的指数共有351个。我们参考wind的分类方式，将所有指数划分为宽基、行业主题和策略风格三类。其中宽基类指数共有45个，行业主题类共有247个，策略风格类共有59个。


![](https://web-api.textin.com/ocr_image/external/437116cd0337141f.jpg)

具体来看，基本涵盖了国内主流的宽基类指数和策略风格类指数，行业主题指数由于数量众多，从一级行业到四级行业均有指数被ETF跟踪，主要涵盖了热门的主题和行业。


![](https://web-api.textin.com/ocr_image/external/afdcb3f19a1d478a.jpg)

不同指数间的收益率差异较大，我们统计了2025年5月份各类型有ETF跟踪的权益指数收益率分布情况：


![](https://web-api.textin.com/ocr_image/external/af7b2008e9c057d3.jpg)

可以看出，宽基类指数由于本身成分股数量较大，其收益差异主要体现了大小盘风格的差异，表现最好的指数和最差指数之间相差7.60％。而行业主题类指数成分股差异较大，所处不同细分领域赛道的指数最高相差15.20%，策略风格类指数介于这两者之间。因此，若能够准确预测截面上不同指数的收益率相对大小关系，则可以利用截面策略获取到相对于大盘的超额收益。

# 二、深度学习因子训练与构建

<table border="1" ><tr>
<td></td>
</tr></table>

本篇报告将着力于研究如何构建出持续具有超额收益的ETF轮动策略，一种常见的方案是从ETF所跟踪的指数成分股因子和相应权重聚合到指数层面，进而得到指数因子，最终形成ETF轮动策略。

在个股因子层面，根据前期的研究测试成果，我们使用目前应用广泛、效果较好的GRU 模型作为基座，在其基础上添加注意力机制，我们使用注意力机制进行特征重要性的采样，不在每个时间步上利用实际预测标签进行时序编码，而是直接结合多步GRU后得到最终预测结果。

## （一）模型设计

参考前期的研究测试成果，我们使用目前应用广泛、效果较好的GRU模型作为基座，在其基础上添加注意力机制，我们使用注意力机制进行特征重要性的采样，不在每个时间步上利用实际预测标签进行时序编码，而是直接结合多步GRU后得到最终预测结果。


![](https://web-api.textin.com/ocr_image/external/2fcbfa539a0e23d5.jpg)

在基础特征层面，我们使用日度K线数据中的高、开、低、收、成交量和VWAP进行复权、标准化、并选取合适的回看天数。我们首先对比了是否加入注意力给最终因子带来的差异。

与前期报告所选时间一致，我们使用较长的训练集进行训练，选股5个随机种子取平均避免随机性。首先在全A股票池中进行测试，因子效果如下：


![](https://web-api.textin.com/ocr_image/external/b75550f4dadd3368.jpg)

可以看出，因子在多个指标中的表现均要优于原始的GRU模型，但收益部分提升幅度有限，在因子的收益稳定性层面有相对明显的提升。因子IC均值从14.4％提升至14.53%，多头信息比率由2.60提升至2.75，多空夏普比率由4.12提升至4.29。

进一步，我们观察两个模型在不同宽基指数股票池中的表现，发现AGRU的提升更多体现在大盘股上，在沪深300成分股中，因子的多头年化超额收益率从15.96％上升至17.24%，收益稳定性上也有所提升。


![](https://web-api.textin.com/ocr_image/external/0538063e724c612b.jpg)

## （二）损失函数权重调整

在包括图像识别等众多领域的机器学习任务中，一种常见的做法是调整样本权重，使得模型在训练时对某些关键样本进行学习，提高其准确率。

在上述训练过程中，我们使用MSE作为损失函数：


![](https://web-api.textin.com/ocr_image/external/a028b656a193be49.jpg)

此处我们将截面上所有股票未来20天收益率等分为10组，将多空两组的权重调整为2，其余8组权重保存为1：


![](https://web-api.textin.com/ocr_image/external/fa5debc8d320af64.jpg)

我们使用同样的特征输入、模型结构和时间长度，仅修改损失函数权重进行对比测试：


![](https://web-api.textin.com/ocr_image/external/aec8c16abc319522.jpg)

从因子的各主要指标来看，IC均值并没有明显变化，但从多头超额和多空收益水平来看，调整权重后基本都有一定提升，一定程度上说明损失函数权重调整能对特定样本的准确率带来一些改进。

最终，我们对AGRU因子在不同股票池以月度调仓频率进行测试，调仓价格使用月初收盘价，每个股票池进行十分组等权测试，同时去除涨跌停、ST、停牌股等，因子主要绩效指标如下：


![](https://web-api.textin.com/ocr_image/external/867e390a5e25ee78.jpg)

因子收益水平和稳定性整体较好，在全A股票池中，IC均值为13.31%,ICIR为1.39，胜率为92.19%，多头年化超额为15.95%，多头超额最大回撤仅为-5.15％。在沪深300股票池中，因子表现同样亮眼，IC均值为12.38%,ICIR为0.94，多头年化超额收益率为21.97%，多头超额回撤为-9.12％。


![](https://web-api.textin.com/ocr_image/external/8cad5082eb9ebad7.jpg)

因子在各股票池均有优异的选股效果，超额净值曲线相对比较平稳。最大回撤基本发生2024年下半年，今年以来收益稳健。

<table border="1" ><tr>
<td>三、ETF 轮动策略构建</td>
</tr></table>

## （一）构建思路

由于投资ETF的本质在于投资其背后的跟踪指数，我们将指数作为投资标的，将个股因子通过指数成分股权重聚合到指数层面，从而获得指数因子。最终对于需要购买的指数，选择规模较大或流动性较好的ETF基金即可。由于我们上述模型均是在A股中训练得到，此处限定指数的可投资范围为A股指数，即排除掉了后缀为SPI,FI,HI,MI,GI的海外市场指数。


![](https://web-api.textin.com/ocr_image/external/33dba0b45033cdd5.jpg)

剩余指数中，基本都能保证绝大部分成分股权重为A股，保证了个股聚合因子的有效性。有效指数的数量变化如下：


![](https://web-api.textin.com/ocr_image/external/581312ba94e853bc.jpg)

近些年由于ETF市场的快速发展，跟踪指数的数量自2015年的100余只到最近已增长到356只，相当于实际可投资标的的截面宽度为356只。

在聚合时，我们使用所有指数的成分股月度权重数据，然后利用个股AGRU因子加权平均得到指数因子：


![](https://web-api.textin.com/ocr_image/external/e37eabae3c049244.jpg)

## （二）指数因子测试效果

我们首先使用每月初收盘价进行因子的月度调仓测试，回测时间自2020年1月至2025年5月底。


![](https://web-api.textin.com/ocr_image/external/dd98afce4d6d5235.jpg)

因子的IC均值为7.80%，多头年化超额收益率为4.92%，多头超额回撤-14.02％。但如果将标的范围限定在行业指数类指数，因子IC均值为8.85%，多头年化超额收益率为6.20%，多头超额最大回撤-14.37％。


![](https://web-api.textin.com/ocr_image/external/63798915b6890d34.jpg)

从净值走势来看，因子多头整体超额稳定，但相较于个股因子表现均有一定下滑。


![](https://web-api.textin.com/ocr_image/external/1b1f8179b2cf971a.jpg)

近年来，A股的行业轮动速度明显加快，使用传统的低频调仓模式恐怕难以快速捕捉行情，因此我们使用周度调仓对上述因子重新测试。


![](https://web-api.textin.com/ocr_image/external/5179482176f3ee11.jpg)

可以发现，周度调仓后因子IC虽然有所下降，但收益水平和稳定性有一定提升。因子的IC 均值为4.84%，多头年化超额收益率为8.59%，多头超额回撤-13.23％。但如果将标的范围限定在行业指数类指数，因子IC均值为5.73%，多头年化超额收益率为9.57%，多头超额最大回撤-13.67％。


![](https://web-api.textin.com/ocr_image/external/4384854ca30a477b.jpg)

从净值走势来看，因子多头整体超额稳定，但相较于个股因子表现均有一定下滑。


![](https://web-api.textin.com/ocr_image/external/bbe23b9e48c9ba68.jpg)

## （三）ETF轮动策略效果

我们进一步考虑贴合交易实际，以沪深300全收益指数作为比较基准，将指数因子排名靠前的10％的指数构造投资组合，形成最终的投资策略，手续费假设双边千一，每周调仓。


![](https://web-api.textin.com/ocr_image/external/32a225bd9f511eab.jpg)

策略的年化超额收益率为7.94%，信息比率为0.94，超额最大回撤为-10.78％。


![](https://web-api.textin.com/ocr_image/external/357c4a78febba899.jpg)

## （四）MMR相关性去重与策略效果对比

与投资股票不同的是，投资指数会存在部分股票覆盖不到、且部分指数走势高度重合的问题。可能会给实际投资稳定性带来较大的影响。我们以2025年5月底的策略持仓举例：


![](https://web-api.textin.com/ocr_image/external/7a335a24198f7a60.jpg)

可以发现，虽然持仓标的数量较多，但大多都暴露在了某些特定行业或特定风格上，如800银行、中证银行、上证金融、180金融、300非银、300金融等。另外红利风格本身也有较高的银行成分占比，而红利类的指数又有包括股息龙头、上证国企红利、上红低波、300红利低波等。因此，如果能够调整策略的构建方式，发挥量化投资多种标的分散风险的作用，应当能提升最终的策略稳定性表现。

MMR（最大边缘相关模型）是一种在互联网领域中常见的控制多样性的算法，主要用于控制给用户推送的推荐内容。典型的场景为，首先用排序学习类的算法确定所有样本的用户感兴趣程度，同时为了避免排在靠前位置的内容全都来自一个主题，额外使用MMR算法平衡用户感兴趣程度和内容之间的相似度。在投资领域这一思想同样适用，我们既希望获取得分较高的投资标的，又希望使得最终选到的投资标的相关性尽可能低。


![](https://web-api.textin.com/ocr_image/external/5357cb8a2a271360.jpg)

在投资领域中，可以指所有潜在的投资标的，Q可以指未来20天收益率，R为D所构成的集合，S为当前所有已被选定的标的。为标的未来一段时间收益率（因子值），为标的之间的相关性。λ为超参数，用于控制标的间相关性和预测未来收益之间的相对重要程度，即可以用于调节我们更侧重因子排名还是标的间的相关度。接下来我们举例说明MMR在标的选取中的实际用法：


![](https://web-api.textin.com/ocr_image/external/627377c418c540f7.jpg)

1．第一次迭代：此时S结果集为空，因子值最高的为D1，则将其加入S， S={D1}

2．第二次迭代，对于D2-D5，分别计算和D1的相关性并得到对应的MMR分数。以D2为例,1MMR=λ*0.90-(1-λ)0.11=0.395。则剩余标的的MMR分别为0.135,-0.35和0.19，最终由于D2具有较大的MMR，将其添加至S中。 S={D1,D2}。

3. 第三次迭代，对于剩下的标的分别计算和已有标的相关性的最大值。对于D3:max(corr(D1,D2),corr(D2,D3))=0.29,MMR=λ*0.50-(1-λ)*0.29=0.105 D4和D5的MMR 值分别为-0.35和0.06，最终选择D3。 S={D1,D2,D3}

4．逐渐重复过程，直到遍历所有标的。不难推断，如果不考虑相关性，我们前三个标的选择应为｛D1,D2,D5｝。

综上，通过MMR算法，我们牺牲了一定准确性，但有效使标的之间的差异度更大。

此处我们对MMR算法进行一定改进，将指数过去5年日度收益率计算两两相关性，控制持仓数量构建组合，在ETF轮动策略中进行测试。


![](https://web-api.textin.com/ocr_image/external/51313fa56de1773d.jpg)

可以看出，通过控制选中标的之间的相关性，策略的超额收益、信息比率和超额最大回撤均有一定程度改善。年化超额收益率由7.94％提升至8.43%，信息比率由0.94提升至0.99，超额最大回撤由-10.78％下降至-9.87％。


![](https://web-api.textin.com/ocr_image/external/343ecf41fd3ddef7.jpg)

## （五）ETF可投资性分析

由于部分热门指数存在扎堆发行ETF产品的现象，我们一般选取当时规模最大、流动性（过去20天成交量）最好的ETF基金进行投资。但部分指数依然只有一个ETF跟踪，此时ETF规模可能会影响策略容量。我们统计了所有指数被ETF跟踪的数量分布，发现大部分指数只有1只ETF基金跟踪，占比接近一半。


![](https://web-api.textin.com/ocr_image/external/70ce5405ebcd8fdc.jpg)

因此，我们统计了历史上ETF的规模分布情况，发现历史上ETF中位数基本在3亿元左右波动，但部分ETF规模较小，仅有几百万元。


![](https://web-api.textin.com/ocr_image/external/ff1026be2a8c7ac1.jpg)

对此，我们对于每次调仓时规模一亿元以下的ETF基金进行剔除，其跟踪的指数就不在处于可投资范围内，重新进行策略回测：


![](https://web-api.textin.com/ocr_image/external/857be1cf5cc75b35.jpg)

策略的主要指标基本基本不受影响，年化超额收益率为8.95%，信息比率为1.02，超额最大回撤-9.63％。


![](https://web-api.textin.com/ocr_image/external/4d1b3ce95ab15883.jpg)

# 四、固定数量ETF轮动策略

由于ETF产品发行加速，若直接使用十分组等权方案的构建策略，会使近期需要持仓的ETF产品较多。我们考虑测试仅持仓固定数量ETF情况下策略的表现。

与前期不同的是，我们进一步调整MMR计算方式，策略标的选择在因子得分和相关性之间进一步权衡。

可以看出，即便仅持仓较少数量的ETF,ETF的超额最大回撤并没有明显上升，使得最终投资组合的可操作性大幅提升。在持仓5只ETF的情况下，年化超额收益率为12.34%，超额最大回撤为-12.17％。持仓10只ETF时，年化超额收益率为8.75%，超额最大回撤为-8.83％。持仓15只ETF时，年化超额收益率为8.13%，超额最大回撤为-8.66％。

分年度来看，在持仓10只ETF的情况下，策略每年均获取了正超额收益，今年以来已有8.74％的超额收益。

以10只ETF持仓的投资组合为例，以下为近期每周的具体持仓。可以看出，模型近期偏好红利、金融板块，以大盘为主要风格。且对于热点事件影响到的动漫游戏、生物医药等也会及时加入持仓。

进一步地，我们观察过去几个月每月末的持仓情况，今年以来组合的风格变化情况不大，持续推荐银行、红利等板块。今年的超额收益相对也比较稳健。

# 五、总结

在本篇报告中，我们首先使用AGRU模型基于日频K线量价数据训练得到了A股上表现优异的选股因子。模型训练时使用损失函数调整的方式，改进因子多空收益表现。最终因子在沪深300股票池上年化超额收益为21.97%，超额最大回撤为-9.12％。在中证500股票池中年化超额收益率为11.46%，超额最大回撤为-7.75％。中证1000股票池中年化超额收益率为15.36%，超额最大回撤为-6.14％。

接下来我们使用个股因子通过指数成分股权重映射的方式得到指数层面的因子值。月度调仓情况下，因子的IC均值为7.80%，多头年化超额收益率为4.92%，多头超额回撤-14.02％。但若将调仓频率提升至周频，因子的IC均值为4.84%，多头年化超额收益率为8.59%，多头超额回撤-13.23％。收益水平有一定提升，这也与A股较快的行业轮动速度相匹配。

最终我们以沪深300全收益指数作为比较基准，将指数因子排名靠前的10％的指数作为备选标的，额外使用MMR算法排除掉相关性过高的指数，避免组合集中暴露在某些特定行业或风格上。策略的年化超额收益率为8.43%，信息比率为0.99，超额最大回撤为-9.87％。

若考虑限制投资标的数量，我们分别测试了仅投资5只、10只和15只ETF的情况下，策略的表现。在持仓5只ETF的情况下，年化超额收益率为12.34%，超额最大回撤为-12.17％。持仓10只ETF时，年化超额收益率为8.75%，超额最大回撤为-8.83％。持仓15只ETF时，年化超额收益率为8.13%，超额最大回撤为-8.66％。

# 六、风险提示

本文所述算法与模型用量化方法通过历史数据统计、建模和测算完成，所得结论与规律在市场政策、环境变化时存在失效风险。

基于模型得到的相关结论并不能完全准确地刻画现实环境以及预测未来。

本文策略通过一定的假设与历史数据回测得到，当交易成本提高、市场结构及交易行为改变时有可能存在失效风险，可能导致策略收益下降或出现亏损。

法律声明：

本微信号推送内容仅供广发证券股份有限公司（下称“广发证券”）客户参考，其他的任何读者在订阅本微信号前，请自行评估接收相关推送内容的适当性，广发证券不会因订阅本微信号的行为或者收到、阅读本微信号推送内容而视相关人员为客户。

完整的投资观点应以广发证券研究所发布的完整报告为准。完整报告所载资料的来源及观点的出处皆被广发证券认为可靠，但广发证券不对其准确性或完整性做出任何保证，报告内容亦仅供参考。

在任何情况下，本微信号所推送信息或所表述的意见并不构成对任何人的投资建议。除非法律法规有明确规定，在任何情况下广发证券不对因使用本微信号的内容而引致的任何损失承担任何责任。读者不应以本微信号推送内容取代其独立判断或仅根据本微信号推送内容做出决策。

本微信号推送内容仅反映广发证券研究人员于发出完整报告当日的判断，可随时更改且不予通告。

本微信号及其推送内容的版权归广发证券所有，广发证券对本微信号及其推送内容保留一切法律权利。未经广发证券事先书面许可，任何机构或个人不得以任何形式翻版、复制、刊登、转载和引用，否则由此造成的一切不良后果及法律责任由私自翻版、复制、刊登、转载和引用者承担。

继续滑动看下一个

轻触阅读原文


![](https://web-api.textin.com/ocr_image/external/951e18f09b35242a.jpg)

广发金融工程研究

向上滑动看下一个


![](https://web-api.textin.com/ocr_image/external/9fbd6010ce43503b.jpg)

广发金融工程研究

赞

分享

推荐

写留言

选择留言身份

